{% load static %}
<!DOCTYPE html>
<html lang="ca" style="font-size: 100%">
<head>
    <style type="text/css">.turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition: width 300ms ease-out,
        opacity 150ms 150ms ease-in;
        transform: translate3d(0, 0, 0);
    }
    </style>
    <title>kbin.social - Explore the Fediverse</title>
    <link rel="icon" href="{% static '/ico/favicon.ico' %}" sizes="any">
    <link rel="stylesheet" href="{% static '/css/824.b4cc3385.css' %}" data-turbo-track="reload">
    <link rel="stylesheet" href="{% static '/css/app.910c0aab.css' %}" data-turbo-track="reload">
</head>
<body class="theme--light" data-controller="kbin notifications" data-turbo="false">



{% include 'base.html' %}
<div id="middle" class="page-entry-front">
    <div class="kbin-container">
        <main id="main" class="" data-controller="lightbox timeago">
            <aside id="options" class="options options--top">
                <menu class="options__main no-scroll">
                    <li><a class="{% if active_option == 'top' %}active{% endif %}" href="/top/{{ active_filter }}">Top</a></li>
                    <li><a class="{% if active_option == 'newest' %}active{% endif %}" href="/newest/{{ active_filter }}">Newest</a></li>
                    <li><a class="{% if active_option == 'commented' %}active{% endif %}"
                           href="/commented/{{ active_filter }}">Commented</a></li>
                </menu>
                <menu class="options__filters">
                    <li class="dropdown">
                        <button aria-label="Filtrar per tipus" title="Filtrar per tipus"><i class="fa-solid fa-filter"></i>
                            Filtrar per tipus
                        </button>
                        <ul class="dropdown__menu">
                            <li>
                                <a href="/{{ active_option }}/tot" class="{% if active_filter == 'tot' %}active{% endif %}">
                                    Tot
                                </a>
                            </li>
                            <li>
                            <a href="/{{ active_option }}/links" class="{% if active_filter == 'links' %}active{% endif %}">
                            <!--     <a href="{{ request.path }}/Links "class="{% if active_filter == 'links' %}active{% endif %}"> -->
                                    Links
                                </a>
                            </li>
                            <li>
                                 <a href="/{{ active_option }}/threads" class="{% if active_filter == 'threads' %}active{% endif %}">
                                    Threads
                                </a>
                            </li>
                        </ul>
                    </li>
                </menu>
            </aside>
            <div id="content">
                {% for thread in threads %}
                    <article class="entry section subject">
                        <header>
                            <h2>
                                <a rel="nofollow noopener noreferrer" href="{% url 'veure_thread' thread.id 'top' %}">{{ thread.title }}</a>
                                {% if thread.url != none %}
                                    <span class="entry__domain">
                                        (<a href="https://{{ thread.url }}">{{ thread.url }}</a>) <!--TODO: AL CREAR EL LINK MIRAR QUE EL FORMAT SIGUI CORRECTE D'ALGUNA MANERA -->
                                    </span>
                                {% endif %}
                            </h2>
                        </header>
                        <aside class="meta entry__meta">
                            <a class="user-inline" href="/u/{{ thread.author_id }}">{{ thread.author_id }}</a>
                            <time class="timeago"
                                  datetime="{{ thread.temps_desde_creacio }}">{{ thread.temps_desde_creacio }}</time>
                            <!--AIXO HA DE SER PER POSAR EL MAGAZINE AMB EL SEU LINK    <a href="/m/news@lemmy.world" class="magazine-inline" title="@news@lemmy.world">
                                                        news</a> -->
                        </aside>
                        <aside class="vote">
                            <form action="{% url 'like_thread' thread.id %}" name = "like_thread" method="post" class="vote__up">
                                <input type = "hidden" name="next" value="{{ request.path }}">
                                <button type="submit" title="Vots positius" aria-label="Vots positius">
                                    <span data-subject-target="favCounter">{{ thread.num_likes }}</span>
                                    <span>
                                        <i class="fa-solid fa-arrow-up"></i>
                                    </span>
                                </button>
                            </form>
                            <form action="{% url 'dislike_thread' thread.id %}" name = "dislike_thread" method="post" class="vote__down">
                                <input type = "hidden" name="next" value="{{ request.path }}">
                                <button type="submit" title="Vots negatius" aria-label="Vots negatius">
                                    <span data-subject-target="downvoteCounter">{{ thread.num_dislikes }}</span> <span><i
                                        class="fa-solid fa-arrow-down"></i></span>
                                </button>
                                <input type="hidden" name="token"
                                       value="84e7da4c73c.ioSODCUxwfZdj-925BPebgyW-2z8JstOW_7CO6nILBY.89bJaRdY9cIM_4Ul0yWRH0_0lFytZ4V2BM6kWpiOHCe8wuh-UFWgmmW4mA">
                            </form>
                        </aside>
                        <footer>
                            <menu>
                                <li>
                                    <a class="stretched-link" href="{% url 'veure_thread' thread.id 'top' %}"><span data-subject-target="commentsCounter">{{ thread.num_coments }}</span> comments </a>
                                </li>
                                <li>
                                    <form action="{% url 'boost_thread' thread.id %}" name = "boost_thread" method="post">
                                        <input type = "hidden" name="next" value="{{ request.path }}">
                                        <button class="boost-link stretched-link" type="submit"
                                            data-action="subject#favourite">boost
                                            {% if thread.num_boosts != 0 %}
                                                <span class="" data-subject-target="upvoteCounter">({{ thread.num_boosts }})</span>
                                            {% endif %}
                                        </button>
                                    </form>
                                </li>
                            </menu>
                            <div data-subject-target="container" class="js-container">
                            </div>
                        </footer>
                    </article>
                {% endfor %}
            </div>
        </main>
    </div>
</div>
</body>
</html>
